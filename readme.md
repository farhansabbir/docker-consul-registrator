This is the drop-in python for container registration in consul I used in my system.

Works with python3.9.4 (should work on any python3), docker 20.10.6, build 370c289 and consul 1.9.5

Excuse the stranded, unused objects. Will cleanup later
Excuse some of the bad codes. Had to get it work ASAP. 
Fork it and make it better. Peace!